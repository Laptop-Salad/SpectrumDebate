extends base.pug

block content
    main(id="dashboard")
        section(class="options")
            h1 = "Dashboard"
            button(id="nsBtn") = "Write a new statement..."

            a(id="delete" href="delete-user/{$username}") = "Delete this account"

        dialog(id="nsModal")
            div
                h2 = "Write a new statement"
                button(id="nsCloseBtn") = "x"
            form(method="POST" action="new-statement")
                input(type="text" name="ns-title" id="nsTitle" placeholder="Title" minlength="1" maxlength="100" required)
                textarea(type="text" name="ns-text" id="nsText" placeholder="Write a description" minlength="1" maxlength="1000" required)
                input(type="submit" class="submit")
        
        div(class="statements")
            each $statement in $statements
                div(class="statement" role="link" tabindex="0" onclick="window.location.href='{$domain}/statement/{$statement['id']}'") 
                    div(class="percentages" style="grid-template: 1fr / {$statement['votesCount']['disagree']}fr {$statement['votesCount']['neutral']}fr {$statement['votesCount']['agree']}fr;")
                        div(class="disagree")
                        div(class="neutral")
                        div(class="agree")

                    div(class="content")

                        div(class="inline")
                            h2(class="statement-title") = $statement["title"] 
                            p(class="margin-right")
                                span = "Stated "
                                span = $statement["time"]
                    
                    a(href="/edit-statement/{$statement['id']}") = "Edit Statement"
                    br
                    a(href="/delete-statement/{$statement['id']}") = "Delete Statement"

        script(src="/app/scripts/dashboard.js");
